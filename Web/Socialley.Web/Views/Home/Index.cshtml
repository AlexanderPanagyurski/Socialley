@model Socialley.Web.ViewModels.Posts.PostViewModel[]
@{
    this.ViewData["Title"] = "Home Page";
}
<link href="~/css/post-card.css" rel="stylesheet" />
<section class="hero">
    <div class="container">
        @foreach (var post in this.Model)
        {
            <div class="row">
                <div class="col-lg-6 offset-lg-3">
                    <div class="cardbox shadow-lg bg-white">

                        <div class="cardbox-heading">
                            <!-- START dropdown-->
                            <div class="dropdown float-right">
                                <button class="btn btn-flat btn-flat-icon" type="button" data-toggle="dropdown" aria-expanded="false">
                                    <em class="fa fa-ellipsis-h"></em>
                                </button>
                                <div class="dropdown-menu dropdown-scale dropdown-menu-right" role="menu" style="position: absolute; transform: translate3d(-136px, 28px, 0px); top: 0px; left: 0px; will-change: transform;">
                                    <a class="dropdown-item" href="#">Hide post</a>
                                    <a class="dropdown-item" href="#">Stop following</a>
                                    <a class="dropdown-item" href="#">Report</a>
                                </div>
                            </div><!--/ dropdown -->
                            <div class="media m-0">
                                <div class="d-flex mr-3">
                                    <a href=""><img class="img-fluid rounded-circle" src="@post.UserProfileImageUrl" alt="User"></a>
                                </div>
                                <div class="media-body">
                                    <p class="m-0" ><a class="user-profile-hyperlink paragraph-popover" asp-area="" asp-controller="Users" asp-action="UserProfile" asp-route-userId="@post.UserId" data-trigger="hover" data-toggle="popover" data-title="<img class='img-fluid rounded-circle img-popover ml-2' src='@post.UserProfileImageUrl'><p class='paragraph-username-popver ml-4'><a class='user-profile-hyperlink'  href='/Users/UserProfile?userId=@post.UserId'>@post.UserUserName</a></p>" data-html="true" data-content="<p class='popover-info-paragraph mr-5 ml-5'>Posts: <strong>@post.UserPostsCount</strong></p> <p class='popover-info-paragraph mr-5'>Followers: <strong>@post.UserFollowersCount</strong></p> <p class='popover-info-paragraph'>Followings: <strong>@post.UserFollowingsCount</strong></p>">@post.UserUserName</a></p>
                                    <small><span class="post-datetime-created">@post.CreatedOn.ToShortDateString()</span></small>
                                </div>
                            </div><!--/ media -->
                        </div><!--/ cardbox-heading -->

                        <div class="cardbox-item">
                            <img class="img-fluid" src="@post.ImageUrl" alt="Image">
                        </div><!--/ cardbox-item -->
                        <div class="cardbox-base">
                            @*<ul class="float-right">
                                    <li><a><i class="fa fa-comments"></i></a></li>
                                    <li><a><em class="mr-5">12</em></a></li>
                                    <li><a><i class="fa fa-share-alt"></i></a></li>
                                    <li><a><em class="mr-3">03</em></a></li>
                                </ul>*@
                            @if (this.User.Identity.IsAuthenticated)
                            {
                                var id = $"\"{post.Id}\"";
                                @*<div class="row">
                                        <div class="col float-left pt-2 px-5">
                                            <form id="favoritesForm" method="post"></form>
                                            <a href="#" onclick="addToFavorites(@id); return false"><i class="fa fa-heart"></i></a>
                                            <div id="favoritesCount">@post.FavoritesCount</div>
                                        </div>
                                        <div class="col float-right px-5"> <button type="button" class="btn btn-primary float-right" onclick="showAddCommentForm(null)"><i class="fa fa-comment-dots"></i>&nbsp; Comment</button> </div>
                                    </div>*@
                                <div class="clearfix row">
                                    <form id="favoritesForm" method="post"></form>
                                    <div class="col-1 ml-2 mt-2 mb-2">
                                        @if (post.IsLiked)
                                        {
                                            <a href="#" onclick="addToFavorites(@id); return false"><i class="fa fa-heart" style="color:red"></i></a>
                                        }
                                        else
                                        {
                                            <a href="#" onclick="addToFavorites(@id); return false"><i class="fa fa-heart"></i></a>
                                        }
                                    </div>
                                    <div class="col-1 mt-2">
                                        <div id="favoritesCount">@post.FavoritesCount</div>
                                    </div>

                                </div>

                            }

                            <span class="float-left">
                                <strong>@post.UserUserName </strong>
                                @Html.Raw(@post.SanitizedContent)
                            </span>
                        </div><!--/ cardbox-base -->
                        <div class="cardbox-comments">
                            <span class="comment-avatar float-left">
                                <a href=""><img class="rounded-circle" src="@post.UserProfileImageUrl" alt="..."></a>
                            </span>
                            <div class="search">
                                <input placeholder="Write a comment" type="text">
                                <button><i class="fa fa-camera"></i></button>
                            </div><!--/. Search -->
                        </div><!--/ cardbox-like -->

                    </div><!--/ cardbox -->

                </div><!--/ col-lg-6 -->
            </div><!--/ row -->
        }
    </div><!--/ container -->
</section>


